{% extends 'gym/base.html' %}
{% load static %}
{% block title %}Asignar Membresía{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-100 p-6">
  <div class="max-w-3xl mx-auto bg-white p-6 rounded-2xl shadow-md">
    
    <!-- Título -->
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-gray-800">Asignar Membresía</h2>
      <a href="{% url 'membresia' %}" class="text-blue-600 hover:underline text-sm">← Volver al listado</a>
    </div>

    <!-- Mensajes -->
    {% if messages %}
      <div class="mb-4 space-y-2">
        {% for message in messages %}
          <div class="px-4 py-2 rounded-xl text-sm
                      {% if message.tags == 'error' %} bg-red-100 text-red-800
                      {% elif message.tags == 'success' %} bg-green-100 text-green-800
                      {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Formulario -->
    <form method="POST" class="grid grid-cols-1 gap-6">
      {% csrf_token %}

      <!-- Tipo de membresía -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Tipo de Membresía</label>
        <select name="mem_tipo" required
                class="mt-1 block w-full rounded-xl border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
          <option value="" disabled selected>Selecciona un tipo</option>
          {% for tipo in tipos %}
            <option value="{{ tipo.tm_id }}">{{ tipo.tm_nombre }} - ${{ tipo.tm_precio }} ({{ tipo.tm_duracion_dias }} días)</option>
          {% endfor %}
        </select>
      </div>

      <!-- Usuario -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Usuario</label>
        <select name="mem_usuario" required
                class="mt-1 block w-full rounded-xl border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
          <option value="" disabled selected>Selecciona un usuario</option>
          {% for usuario in usuarios %}
            <option value="{{ usuario.username }}">{{ usuario.usuario_nombre }} {{ usuario.usuario_apellidos }}</option>
          {% endfor %}
        </select>
      </div>

     

      <!-- Botón enviar -->
      <div class="flex justify-end">
        <button type="submit"
                class="bg-green-600 text-white px-6 py-2 rounded-xl hover:bg-green-700 hover:scale-105 transition transform duration-150">
          Guardar membresía
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
